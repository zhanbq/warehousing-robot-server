<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>wcs设备制作</title>
		<script src="../../static/js/vuejs-2.5.16.js"></script>
		<script src="../../static/js/axios-0.18.0.js"></script>
		<!-- 引入样式 -->
		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
		<!-- 引入组件库 -->
		<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	</head>
	<body>
	<div id="app">
		<el-form ref="form" :model="form" label-width="80px">
			<el-form-item label="设备类型">
				<el-select v-model="form.region" placeholder="请选择设备类型">
					<el-option label="分播墙" value="fenboqiang"></el-option>
					<el-option label="自动立库" value="zidongliku"></el-option>
					<!--<el-option v-for="c of containerList" :label="c.typeName+'-'+c.code" :value="c.code"></el-option>-->
				</el-select>
			</el-form-item>
			<el-form-item label="设备名称">
				<el-input v-model="form.name"></el-input>
			</el-form-item>
			<el-form-item label="设备编号">
				<el-input v-model="form.code"></el-input>
			</el-form-item>

			<el-form-item label="仓库">
				<el-input v-model="form.warehouseId"></el-input>
			</el-form-item>
			<el-form-item label="库区">
				<el-input v-model="form.warehouseAreaId"></el-input>
			</el-form-item>
			<el-form-item label="巷道">
				<el-input v-model="form.roadwayNo"></el-input>
			</el-form-item>


			<el-form-item label="可承载容器" prop="containerType">
				<el-checkbox-group v-model="form.containTypes">
					<!--<el-checkbox label="美食/餐厅线上活动" name="containType1"></el-checkbox>-->
					<!--<el-checkbox label="地推活动" name="containType2"></el-checkbox>-->
					<!--<el-checkbox label="线下主题活动" name="containType3"></el-checkbox>-->
					<!--<el-checkbox label="单纯品牌曝光" name="containType4"></el-checkbox>-->
					<el-checkbox v-for="c of containerList" :label="c.typeName+'-'+c.code" :value="c.code"></el-checkbox>
				</el-checkbox-group>
			</el-form-item>
			<el-form-item label="层数">
				<el-input v-model="form.pliesNum"></el-input>

			</el-form-item>

			<el-form-item
					v-for="(domain, index) in form.layers"
					:label="'层高' + (index+1)"
					:key="domain.key"
					:prop="'layers.' + index + '.value'"
					:rules="{
      required: true, message: '层高不能为空', trigger: 'blur'
    }"
			>
				<el-input v-model="domain.value"></el-input><el-button @click.prevent="removeLayer(domain)">删除</el-button>

			</el-form-item>


			<el-form-item>
				<el-button @click="addLayer">添加层高</el-button>
			</el-form-item>

<!-- =======================================================================================================================-->

			<el-form-item label="列数">
				<el-input v-model="form.columnsNum"></el-input>

			</el-form-item>
			<el-form-item
					v-for="(c, index) in form.columns"
					:label="'列' + (index+1)"
					:key="c.key"
					:prop="'columns.' + index + '.value'"
					:rules="{
      required: true, message: '列数不能为空', trigger: 'blur'
    }"
			>
				<el-input v-model="c.value"></el-input><el-button @click.prevent="removeColumn(c)">删除</el-button>

			</el-form-item>
			<el-form-item>
				<el-button @click="addColumu">添加列数</el-button>
			</el-form-item>
<!-- ================================================================================================================================= -->
			<el-form-item label="设备名称">
				<el-input v-model="form.name"></el-input>
			</el-form-item>
			<el-form-item>
				<el-button type="primary" @click="onSubmit">立即创建</el-button>
				<el-button @click="resetForm('form')">重置</el-button>
				<el-button>取消</el-button>
			</el-form-item>
		</el-form>
	</div>
	</body>
	<script>
        var Main = {
            data() {
                return {
                    form: {
                        name: '',
                        region: '',
                        date1: '',
                        date2: '',
                        delivery: false,
                        containTypes: [],
                        resource: '',
                        desc: '',

						//
						roadwayNo:"",
						pliesNum:"",
						columnsNum:"",

						containerList:[],

						layers: [{
							value: ''
						}],
						columns:[{
							value: ''
						}]
                    },
					containerList:[]
                }
            },
            methods: {
                onSubmit() {
                    console.log('submit!');
					var _this = this;
				},
                resetForm(formName) {
                    this.$refs[formName].resetFields();
                },
				addLayer(){
					this.form.layers.push({
						value: '',
						key: Date.now()
					});
				},
				removeLayer(item) {
					var index = this.form.layers.indexOf(item)
					if (index !== -1) {
						this.form.layers.splice(index, 1)
					}
				},
				addColumu(){
					this.form.columns.push({
						value: '',
						key: Date.now()
					});
				},
				removeColumn(item) {
					var index = this.form.columns.indexOf(item)
					if (index !== -1) {
						this.form.columns.splice(index, 1)
					}
				},
				findAllContainers:function () {
					var _this = this;
					axios.get("/container/all").then(function (response) {
						_this.containerList = response.data.data;
						console.log(_this.containerList);
					}).catch(function (err) {
						console.log(err);
					});
				}
            },
			created(){
            	this.findAllContainers();
			}
        }
        var Ctor = Vue.extend(Main)
        new Ctor().$mount('#app')
	</script>
</html>
